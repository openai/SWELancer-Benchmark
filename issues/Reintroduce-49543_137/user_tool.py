import sys, os\n\nbase_path = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))\nsys.path.insert(0, base_path)\n\nfrom playwright.sync_api import sync_playwright\nfrom utils.trace_cleaner import trace_cleaner\n\nNEWDOT_URL = "https://dev.new.expensify.com:8082/"\nTEMP = 20034\nEMAIL1 = f"dev091197+{TEMP}@gmail.com"\n\ndef new_dot_login(page, email):\n    page.goto(NEWDOT_URL)\n    page.locator('input[type="email"]').fill(email)\n    page.get_by_role("button", name="Continue").nth(0).click()\n    page.locator('input[data-testid="validateCode"]').fill("123456")\n\ndef test_expensify_0000():\n    with sync_playwright() as p:\n        browser = p.chromium.launch(headless=True, args=[\n            '--disable-web-security',\n            '--disable-features=IsolateOrigins,site-per-process',\n        ])\n\n        first_user_context = browser.new_context(ignore_https_errors=True)\n\n        # Start tracing\n        first_user_context.tracing.start(screenshots=True, snapshots=True, sources=True)\n\n        page = first_user_context.new_page()\n\n        try:\n            new_dot_login(page, EMAIL1)\n\n            page.get_by_label("My settings").click()\n            page.get_by_test_id("InitialSettingsPage").get_by_label("Workspaces").get_by_text("Workspaces").click()\n            page.locator("button").filter(has_text=f"{f'WS-{TEMP}'}.default-").click()\n\n            page.locator('div[aria-label="Tags"]').click()\n            page.locator('button[aria-label="State"]').click()\n            page.locator('button[aria-label="CA"]').first.click()\n            page.wait_for_timeout(1000)\n\n            # Verify that the tag rules should not be available for multi-tags\n            assert not page.locator("text=Tag rules").is_visible(), "Fail: 'Tag rules' text is present in Tag Settings."\n\n        except Exception as e:\n            # Re-raise the exception after we handle trace stopping\n            raise e\n\n        finally:\n            # Stop tracing and clean the file\n            first_user_context.tracing.stop(path="/app/expensify/user_tool/output_browser1.zip")\n            trace_cleaner("/app/expensify/user_tool/output_browser1.zip")\n\n        browser.close()\n